name: Ci / CD

on:
  push:
    branches:
      - master
      
  pull_request:
    branches:
      - master

jobs:
  Prueba_CI:
    name: Integracion Continua
    runs-on: ubuntu-latest

    steps:
    - name: Darli CI
      run: echo " Hola Darli "

    - name: Gomera CI
      run: echo " Hola Gomera "

  Prueba_CD:
    name: Despliegue Contínuo
    needs: Prueba_CI
    runs-on: ubuntu-latest

    steps:
    - name: Dayi CD
      run: echo " Hola Dayelin "

    - name: Checkout
      uses: actions/checkout@v4.2.2

    - name: Diaz CD
      run: echo " Hola Diaz "

    - name: Setup Python
      uses: actions/setup-python@v5.6.0
      with:
        python-version: "3.11"

    - name: Version Python
      run: python --version

  Prueba_Action:
    name: Prueba de Action
    needs: Prueba_CD
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4.2.2

      - name: dir
        uses: ./.github/action/my_action
        with:
          DevOps: ' Me gusta DevOps y la nube ☁ '
          Full_Stack: ' Voy a ser ingeniero Full Stack Dios Mediante 🙌 '
          Python: ' Me gusta la programacion en Python 👨🏽‍💻 '

  install_services:
    name: Install Services
    runs-on: ubuntu-latest

    services:
      mysql:
        image: mysql:5.7
        ports:
          - 3306:3306
        env:
          MYSQL_ROOT_PASSWORD: root
          MYSQL_DATABASE: test_db
        options: >-
          --health-cmd "mysqladmin ping -h localhost"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 3

      redis:
        image: redis:latest
        ports:
          - 6379:6379
        options: >-
          --health-cmd "redis-cli ping"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 3

    steps:
      - name: Test MySQL
        run: |
          echo "Testing MySQL connection..."
          until mysql -h




